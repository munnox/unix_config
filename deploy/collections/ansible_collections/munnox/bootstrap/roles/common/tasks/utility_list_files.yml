---
# Run rather silly list files tasks using ls on the remote and print the result.
# 
# Example Playbook
# 
# ```
# - name: run the list files utility
#   hosts: "{{ playbook_groups | default('localhost') }},!disabled"
#   tasks:
#     # List file in directory for debugging from a molecule run
#     - name: Run common/tasks/utility_list_files.yml instead of 'main'
#       ansible.builtin.import_role:
#         name: common
#         tasks_from: utility_list_files.yml
#       vars:
#         dir: "{{ container_restore_directory }}/"
#       tags: debug_service
# ```

- name: "Run ls in directory: '{{ dir }}'"
  shell: |
    ls -al "{{ dir }}"
  register: result

- name: "Print Result of ls on {{ dir }}"
  debug:
    msg: |
      Running backup:
        {{ result | to_yaml }}
        
        STDOUT:
        {{ result.stdout }}
